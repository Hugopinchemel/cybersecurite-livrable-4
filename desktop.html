<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Desktop</title>
    <link href="stylesheet/reset-css.css" rel="stylesheet">
    <link href="stylesheet/font-css.css" rel="stylesheet">
    <link href="stylesheet/desktop.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="desktop-grid">
    <div class="task-bar"></div>
    <div class="start">
        <img alt="icon" height="22px" src="elements/pictures/bigrosoft.png" width="22px">
        Commencer
    </div>

    <div class="start-menu">
        <div class="menu-title">Utilisateur</div>
        <div class="applications-list">
            <div class="application" data-href="pages/files.html">
                <img alt="icon" height="22px" src="elements/desktop-icon/explorer.exe_14_252.ico" width="22px">
                Fichiers
            </div>
            <div class="application" data-href="pages/video-doodle.html">
                <img alt="icon" height="22px" src="elements/pictures/logo/Doodle.png" width="22px">
                Doodle
            </div>
            <div class="application" data-href="pages/video-6mail.html">
                <img alt="icon" height="22px" src="elements/pictures/logo/6mail.png" width="22px">
                6Mail
            </div>
            <div class="application" data-href="pages/video-2pype.html">
                <img alt="icon" height="22px" src="elements/pictures/logo/2pype.png" width="22px">
                2Pype
            </div>
        </div>
    </div>

    <div class="window-element"></div>

    <div class="desktop-element-1" data-href="pages/trash.html">
        <div class="desktop-element-icon">
            <img alt="icon" height="44px" src="elements/desktop-icon/appwiz.cpl_14_1503.ico" width="44px">
        </div>
        <div class="desktop-element-title">Corbeille</div>
    </div>
    <div class="desktop-element-2" data-href="pages/video-doodle.html">
        <div class="desktop-element-icon">
            <img alt="icon" height="44px" src="elements/pictures/logo/Doodle.png" width="44px">
        </div>
        <div class="desktop-element-title">Doodle</div>
    </div>
    <div class="desktop-element-3" data-href="pages/files.html">
        <div class="desktop-element-icon">
            <img alt="icon" height="44px" src="elements/desktop-icon/explorer.exe_14_252.ico" width="44px">
        </div>
        <div class="desktop-element-title">Fichiers</div>
    </div>
    <div class="desktop-element-4" data-href="pages/video-6mail.html">
        <div class="desktop-element-icon">
            <img alt="icon" height="44px" src="elements/pictures/logo/6mail.png" width="44px">
        </div>
        <div class="desktop-element-title">6Mail</div>
    </div>
    <div class="desktop-element-5" data-href="pages/video-2pype.html">
        <div class="desktop-element-icon">
            <img alt="icon" height="44px" src="elements/pictures/logo/2pype.png" width="44px">
        </div>
        <div class="desktop-element-title">2Pype</div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const contentContainer = document.querySelector('.window-element');

        // Function to handle iframe creation and loading
        function loadInIframe(href) {
            if (href) {
                // Create iframe and close button
                const iframeId = `iframe-${Date.now()}`;
                const iframe = `<div id="${iframeId}" style="position: relative; width: 100%; height: 100%;">
                                    <iframe src="${href}" style="width: 100%; height: 100%; border: none;"></iframe>
                                    <button style="position: absolute; top: 10px; right: 10px; z-index: 1000;" onclick="closeIFrame('${iframeId}')">X</button>
                                </div>`;
                contentContainer.innerHTML = iframe;
            }
        }

        // Add click event listeners to all elements with data-href attributes
        document.querySelectorAll('[data-href]').forEach(element => {
            element.addEventListener('click', () => {
                const href = element.getAttribute('data-href');
                loadInIframe(href);
            });
        });

        // Close iframe function
        window.closeIFrame = function (iframeId) {
            $(`#${iframeId}`).remove();
        };

        // Start menu toggle
        const startButton = document.querySelector('.start');
        const startMenu = document.querySelector('.start-menu');

        startButton.addEventListener('click', () => {
            startMenu.style.display = startMenu.style.display === 'grid' ? 'none' : 'grid';
        });

        document.addEventListener('click', (event) => {
            if (!startButton.contains(event.target) && !startMenu.contains(event.target)) {
                startMenu.style.display = 'none';
            }
        });
    });
</script>
</body>
</html>
